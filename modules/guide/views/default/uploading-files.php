<h1 style="box-sizing: border-box; margin: 20px 0px 10px; font-size: 36px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 500; line-height: 1.1; color: #333333; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Uploading Files</h1>
<blockquote style="box-sizing: border-box; padding: 10px 20px; margin: 0px 0px 20px; font-size: 14px; border-left-width: 5px; border-left-style: solid; border-left-color: #eeeeee; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">
<p style="box-sizing: border-box; margin: 0px;">Note: This section is under development.</p>
</blockquote>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Uploading files in Yii is done via form model, its validation rules and some controller code. Let's review what's needed to handle uploads properly.</p>
<h2 style="box-sizing: border-box; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 500; line-height: 1.1; color: #333333; margin-top: 20px; margin-bottom: 10px; font-size: 30px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Form model</h2>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">First of all, you need to create a model that will handle file upload. Create<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">models/UploadForm.php</code><span class="Apple-converted-space">&nbsp;</span>with the following content:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #007700;">namespace&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">app</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">models</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">yii</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">base</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">Model</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" />use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">yii</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">web</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">UploadedFile</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" /></span><span style="box-sizing: border-box; color: #ff8000;">/**<br style="box-sizing: border-box;" />&nbsp;*&nbsp;UploadForm&nbsp;is&nbsp;the&nbsp;model&nbsp;behind&nbsp;the&nbsp;upload&nbsp;form.<br style="box-sizing: border-box;" />&nbsp;*/<br style="box-sizing: border-box;" /></span><span style="box-sizing: border-box; color: #007700;">class&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">UploadForm&nbsp;</span><span style="box-sizing: border-box; color: #007700;">extends&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">Model<br style="box-sizing: border-box;" /></span><span style="box-sizing: border-box; color: #007700;">{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #ff8000;">/**<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;UploadedFile|Null&nbsp;file&nbsp;attribute<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #007700;">public&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$file</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #ff8000;">/**<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array&nbsp;the&nbsp;validation&nbsp;rules.<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #007700;">public&nbsp;function&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">rules</span><span style="box-sizing: border-box; color: #007700;">()<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">],&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">],<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;}<br style="box-sizing: border-box;" />}</span></code></pre>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">In the code above, we created a model<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">UploadForm</code><span class="Apple-converted-space">&nbsp;</span>with an attribute<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">$file</code><span class="Apple-converted-space">&nbsp;</span>that will become<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">&lt;input type="file"&gt;</code><span class="Apple-converted-space">&nbsp;</span>in the HTML form. The attribute has the validation rule named<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">file</code><span class="Apple-converted-space">&nbsp;</span>that uses<span class="Apple-converted-space">&nbsp;</span><a style="box-sizing: border-box; color: #428bca; text-decoration: none; background: transparent;" href="http://www.yiiframework.com/doc-2.0/yii-validators-filevalidator.html">FileValidator</a>.</p>
<h2 style="box-sizing: border-box; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 500; line-height: 1.1; color: #333333; margin-top: 20px; margin-bottom: 10px; font-size: 30px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Form view</h2>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Next create a view that will render the form.</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #0000bb;">&lt;?php<br style="box-sizing: border-box;" /></span><span style="box-sizing: border-box; color: #007700;">use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">yii</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">widgets</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">ActiveForm</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" /></span><span style="box-sizing: border-box; color: #0000bb;">$form&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">ActiveForm</span><span style="box-sizing: border-box; color: #007700;">::</span><span style="box-sizing: border-box; color: #0000bb;">begin</span><span style="box-sizing: border-box; color: #007700;">([</span><span style="box-sizing: border-box; color: #dd0000;">'options'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;[</span><span style="box-sizing: border-box; color: #dd0000;">'enctype'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'multipart/form-data'</span><span style="box-sizing: border-box; color: #007700;">]]);&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">?&gt;<br style="box-sizing: border-box;" /></span><br style="box-sizing: border-box;" /><span style="box-sizing: border-box; color: #0000bb;">&lt;?=&nbsp;$form</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">field</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">)-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">fileInput</span><span style="box-sizing: border-box; color: #007700;">()&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">?&gt;<br style="box-sizing: border-box;" /></span><br style="box-sizing: border-box;" />&lt;button&gt;Submit&lt;/button&gt;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" /><span style="box-sizing: border-box; color: #0000bb;">&lt;?php&nbsp;ActiveForm</span><span style="box-sizing: border-box; color: #007700;">::</span><span style="box-sizing: border-box; color: #0000bb;">end</span><span style="box-sizing: border-box; color: #007700;">();&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">?&gt;</span></code></pre>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">The<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">'enctype' =&gt; 'multipart/form-data'</code><span class="Apple-converted-space">&nbsp;</span>is important since it allows file uploads.<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">fileInput()</code><span class="Apple-converted-space">&nbsp;</span>represents a form input field.</p>
<h2 style="box-sizing: border-box; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 500; line-height: 1.1; color: #333333; margin-top: 20px; margin-bottom: 10px; font-size: 30px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Controller</h2>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Now create the controller that connects form and model together:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #007700;">namespace&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">app</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">controllers</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">Yii</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" />use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">yii</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">web</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">Controller</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" />use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">app</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">models</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">UploadForm</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" />use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">yii</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">web</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">UploadedFile</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />class&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">SiteController&nbsp;</span><span style="box-sizing: border-box; color: #007700;">extends&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">Controller<br style="box-sizing: border-box;" /></span><span style="box-sizing: border-box; color: #007700;">{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">actionUpload</span><span style="box-sizing: border-box; color: #007700;">()<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&nbsp;new&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">UploadForm</span><span style="box-sizing: border-box; color: #007700;">();<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="box-sizing: border-box; color: #0000bb;">Yii</span><span style="box-sizing: border-box; color: #007700;">::</span><span style="box-sizing: border-box; color: #0000bb;">$app</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">request</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">isPost</span><span style="box-sizing: border-box; color: #007700;">)&nbsp;{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">UploadedFile</span><span style="box-sizing: border-box; color: #007700;">::</span><span style="box-sizing: border-box; color: #0000bb;">getInstance</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">);<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">validate</span><span style="box-sizing: border-box; color: #007700;">())&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">saveAs</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #dd0000;">'uploads/'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">.&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">baseName&nbsp;</span><span style="box-sizing: border-box; color: #007700;">.&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'.'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">.&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">extension</span><span style="box-sizing: border-box; color: #007700;">);<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$this</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">render</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #dd0000;">'upload'</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;[</span><span style="box-sizing: border-box; color: #dd0000;">'model'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">]);<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;}<br style="box-sizing: border-box;" />}</span></code></pre>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Instead of<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">model-&gt;load(...)</code><span class="Apple-converted-space">&nbsp;</span>we are using<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">UploadedFile::getInstance(...)</code>.<span class="Apple-converted-space">&nbsp;</span><a style="box-sizing: border-box; color: #428bca; text-decoration: none; background: transparent;" href="http://www.yiiframework.com/doc-2.0/yii-web-uploadedfile.html">UploadedFile</a><span class="Apple-converted-space">&nbsp;</span>does not run the model validation. It only provides information about the uploaded file. Therefore, you need to run validation manually via<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">$model-&gt;validate()</code>. This triggers the<a style="box-sizing: border-box; color: #428bca; text-decoration: none; background: transparent;" href="http://www.yiiframework.com/doc-2.0/yii-validators-filevalidator.html">FileValidator</a><span class="Apple-converted-space">&nbsp;</span>that expects a file:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #0000bb;">$file&nbsp;</span><span style="box-sizing: border-box; color: #007700;">instanceof&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">UploadedFile&nbsp;</span><span style="box-sizing: border-box; color: #007700;">||&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$file</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">error&nbsp;</span><span style="box-sizing: border-box; color: #007700;">==&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">UPLOAD_ERR_NO_FILE&nbsp;</span><span style="box-sizing: border-box; color: #ff8000;">//in&nbsp;code&nbsp;framework</span></code></pre>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">If validation is successful, then we're saving the file:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">saveAs</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #dd0000;">'uploads/'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">.&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">baseName&nbsp;</span><span style="box-sizing: border-box; color: #007700;">.&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'.'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">.&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">extension</span><span style="box-sizing: border-box; color: #007700;">);</span></code></pre>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">If you're using "basic" application template then folder<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">uploads</code><span class="Apple-converted-space">&nbsp;</span>should be created under<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">web</code>.</p>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">That's it. Load the page and try uploading. Uplaods should end up in<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">basic/web/uploads</code>.</p>
<h2 style="box-sizing: border-box; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 500; line-height: 1.1; color: #333333; margin-top: 20px; margin-bottom: 10px; font-size: 30px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Additional information</h2>
<h3 style="box-sizing: border-box; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 500; line-height: 1.1; color: #333333; margin-top: 20px; margin-bottom: 10px; font-size: 24px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Required rule</h3>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">If you need to make file upload mandatory use<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">skipOnEmpty</code><span class="Apple-converted-space">&nbsp;</span>like the following:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #007700;">public&nbsp;function&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">rules</span><span style="box-sizing: border-box; color: #007700;">()<br style="box-sizing: border-box;" />{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">],&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'skipOnEmpty'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">false</span><span style="box-sizing: border-box; color: #007700;">],<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;];<br style="box-sizing: border-box;" />}</span></code></pre>
<h3 style="box-sizing: border-box; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 500; line-height: 1.1; color: #333333; margin-top: 20px; margin-bottom: 10px; font-size: 24px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">MIME type</h3>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">It is wise to validate type of the file uploaded. FileValidator has property<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">$extensions</code><span class="Apple-converted-space">&nbsp;</span>for the purpose:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #007700;">public&nbsp;function&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">rules</span><span style="box-sizing: border-box; color: #007700;">()<br style="box-sizing: border-box;" />{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">],&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'extensions'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'gif,&nbsp;jpg'</span><span style="box-sizing: border-box; color: #007700;">,],<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;];<br style="box-sizing: border-box;" />}</span></code></pre>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">The thing is that it validates only file extension and not the file content. In order to validate content as well use<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">mimeTypes</code><span class="Apple-converted-space">&nbsp;</span>property of<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">FileValidator</code>:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #007700;">public&nbsp;function&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">rules</span><span style="box-sizing: border-box; color: #007700;">()<br style="box-sizing: border-box;" />{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">],&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'extensions'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'jpg,&nbsp;png'</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'mimeTypes'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'image/jpeg,&nbsp;image/png'</span><span style="box-sizing: border-box; color: #007700;">,],<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;];<br style="box-sizing: border-box;" />}</span></code></pre>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;"><a style="box-sizing: border-box; color: #428bca; text-decoration: none; background: transparent;" href="http://en.wikipedia.org/wiki/Internet_media_type#List_of_common_media_types">List of common media types</a></p>
<h3 style="box-sizing: border-box; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 500; line-height: 1.1; color: #333333; margin-top: 20px; margin-bottom: 10px; font-size: 24px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Validating uploaded image</h3>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">If you upload an image,<span class="Apple-converted-space">&nbsp;</span><a style="box-sizing: border-box; color: #428bca; text-decoration: none; background: transparent;" href="http://www.yiiframework.com/doc-2.0/yii-validators-imagevalidator.html">ImageValidator</a><span class="Apple-converted-space">&nbsp;</span>may come in handy. It verifies if an attribute received a valid image that can be then either saved or processed using<span class="Apple-converted-space">&nbsp;</span><a style="box-sizing: border-box; color: #428bca; text-decoration: none; background: transparent;" href="https://github.com/yiisoft/yii2/tree/master/extensions/imagine">Imagine Extension</a>.</p>
<h3 style="box-sizing: border-box; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 500; line-height: 1.1; color: #333333; margin-top: 20px; margin-bottom: 10px; font-size: 24px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Uploading multiple files</h3>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">If you need download multiple files at once some adjustments are required. View:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #0000bb;">&lt;?php<br style="box-sizing: border-box;" /></span><span style="box-sizing: border-box; color: #007700;">use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">yii</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">widgets</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">ActiveForm</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" /></span><span style="box-sizing: border-box; color: #0000bb;">$form&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">ActiveForm</span><span style="box-sizing: border-box; color: #007700;">::</span><span style="box-sizing: border-box; color: #0000bb;">begin</span><span style="box-sizing: border-box; color: #007700;">([</span><span style="box-sizing: border-box; color: #dd0000;">'options'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;[</span><span style="box-sizing: border-box; color: #dd0000;">'enctype'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'multipart/form-data'</span><span style="box-sizing: border-box; color: #007700;">]]);<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />if&nbsp;(</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">hasErrors</span><span style="box-sizing: border-box; color: #007700;">())&nbsp;{&nbsp;</span><span style="box-sizing: border-box; color: #ff8000;">//it&nbsp;is&nbsp;necessary&nbsp;to&nbsp;see&nbsp;all&nbsp;the&nbsp;errors&nbsp;for&nbsp;all&nbsp;the&nbsp;files.<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #007700;">echo&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'&lt;pre&gt;'</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">print_r</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">getErrors</span><span style="box-sizing: border-box; color: #007700;">());<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'&lt;/pre&gt;'</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" />}<br style="box-sizing: border-box;" /></span><span style="box-sizing: border-box; color: #0000bb;">?&gt;<br style="box-sizing: border-box;" /></span><br style="box-sizing: border-box;" /><span style="box-sizing: border-box; color: #0000bb;">&lt;?=&nbsp;$form</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">field</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'file[]'</span><span style="box-sizing: border-box; color: #007700;">)-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">fileInput</span><span style="box-sizing: border-box; color: #007700;">([</span><span style="box-sizing: border-box; color: #dd0000;">'multiple'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">''</span><span style="box-sizing: border-box; color: #007700;">])&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">?&gt;<br style="box-sizing: border-box;" /></span><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&lt;button&gt;Submit&lt;/button&gt;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" /><span style="box-sizing: border-box; color: #0000bb;">&lt;?php&nbsp;ActiveForm</span><span style="box-sizing: border-box; color: #007700;">::</span><span style="box-sizing: border-box; color: #0000bb;">end</span><span style="box-sizing: border-box; color: #007700;">();&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">?&gt;</span></code></pre>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">The difference is the following line:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #007700;">&lt;?=&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$form</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">field</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'file[]'</span><span style="box-sizing: border-box; color: #007700;">)-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">fileInput</span><span style="box-sizing: border-box; color: #007700;">([</span><span style="box-sizing: border-box; color: #dd0000;">'multiple'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">''</span><span style="box-sizing: border-box; color: #007700;">])&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">?&gt;</span></code></pre>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">Controller:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; line-height: 1.42857143; color: #333333; word-break: break-all; word-wrap: break-word; border-left-width: 5px; border-style: none none none solid; border-left-color: #e0e5ea; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: #f5faff;"><code class="language-php" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre-wrap; background-color: transparent;"><span style="box-sizing: border-box; color: #007700;">namespace&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">app</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">controllers</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">Yii</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" />use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">yii</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">web</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">Controller</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" />use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">app</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">models</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">UploadForm</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" />use&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">yii</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">web</span><span style="box-sizing: border-box; color: #007700;">\</span><span style="box-sizing: border-box; color: #0000bb;">UploadedFile</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />class&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">SiteController&nbsp;</span><span style="box-sizing: border-box; color: #007700;">extends&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">Controller<br style="box-sizing: border-box;" /></span><span style="box-sizing: border-box; color: #007700;">{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">actionUpload</span><span style="box-sizing: border-box; color: #007700;">()<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&nbsp;new&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">UploadForm</span><span style="box-sizing: border-box; color: #007700;">();<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="box-sizing: border-box; color: #0000bb;">Yii</span><span style="box-sizing: border-box; color: #007700;">::</span><span style="box-sizing: border-box; color: #0000bb;">$app</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">request</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">isPost</span><span style="box-sizing: border-box; color: #007700;">)&nbsp;{<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$files&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">UploadedFile</span><span style="box-sizing: border-box; color: #007700;">::</span><span style="box-sizing: border-box; color: #0000bb;">getInstances</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">);<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="box-sizing: border-box; color: #0000bb;">$files&nbsp;</span><span style="box-sizing: border-box; color: #007700;">as&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$file</span><span style="box-sizing: border-box; color: #007700;">)&nbsp;{<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$_model&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&nbsp;new&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">UploadForm</span><span style="box-sizing: border-box; color: #007700;">();<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$_model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$file</span><span style="box-sizing: border-box; color: #007700;">;<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="box-sizing: border-box; color: #0000bb;">$_model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">validate</span><span style="box-sizing: border-box; color: #007700;">())&nbsp;{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$_model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">saveAs</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #dd0000;">'uploads/'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">.&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$_model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">baseName&nbsp;</span><span style="box-sizing: border-box; color: #007700;">.&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'.'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">.&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$_model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">file</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">extension</span><span style="box-sizing: border-box; color: #007700;">);<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="box-sizing: border-box; color: #0000bb;">$_model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">getErrors</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">)&nbsp;as&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$error</span><span style="box-sizing: border-box; color: #007700;">)&nbsp;{<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">addError</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$error</span><span style="box-sizing: border-box; color: #007700;">);<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">hasErrors</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">)){<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">addError</span><span style="box-sizing: border-box; color: #007700;">(<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">,<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">count</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">getErrors</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #dd0000;">'file'</span><span style="box-sizing: border-box; color: #007700;">))&nbsp;.&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'&nbsp;of&nbsp;'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">.&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">count</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #0000bb;">$files</span><span style="box-sizing: border-box; color: #007700;">)&nbsp;.&nbsp;</span><span style="box-sizing: border-box; color: #dd0000;">'&nbsp;files&nbsp;not&nbsp;uploaded'<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #007700;">);<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br style="box-sizing: border-box;" /><br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$this</span><span style="box-sizing: border-box; color: #007700;">-&gt;</span><span style="box-sizing: border-box; color: #0000bb;">render</span><span style="box-sizing: border-box; color: #007700;">(</span><span style="box-sizing: border-box; color: #dd0000;">'upload'</span><span style="box-sizing: border-box; color: #007700;">,&nbsp;[</span><span style="box-sizing: border-box; color: #dd0000;">'model'&nbsp;</span><span style="box-sizing: border-box; color: #007700;">=&gt;&nbsp;</span><span style="box-sizing: border-box; color: #0000bb;">$model</span><span style="box-sizing: border-box; color: #007700;">]);<br style="box-sizing: border-box;" />&nbsp;&nbsp;&nbsp;&nbsp;}<br style="box-sizing: border-box;" />}</span></code></pre>
<p style="box-sizing: border-box; margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 20px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">The difference is<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">UploadedFile::getInstances($model, 'file');</code><span class="Apple-converted-space">&nbsp;</span>instead of<span class="Apple-converted-space">&nbsp;</span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: #c7254e; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: #f9f2f4;">UploadedFile::getInstance($model, 'file');</code>. Former returns instances for<span class="Apple-converted-space">&nbsp;</span><strong style="box-sizing: border-box; font-weight: bold;">all</strong><span class="Apple-converted-space">&nbsp;</span>uploaded files while the latter gives you only a single instance.</p>